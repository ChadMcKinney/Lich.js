<!-- 
    Lich.js - JavaScript audio/visual live coding language
    Copyright (C) 2012 Chad McKinney
	
	http://chadmckinneyaudio.com/
	seppukuzombie@gmail.com
	
	All rights reserved.

	This program is free software; you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation; either version 2 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program; if not, write to the Free Software
    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301  USA
-->

<!DOCTYPE html>

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Lich.js</title>
	<meta name="keywords" content="Experimental, Computer Music, Multimedia, Live Coding" />
	<meta name="description" contexnt="Lich.js is a very simple live coding audio and visual language implemented in javascript." />
	<link rel="stylesheet" type="text/css" href="WP-Content/LichStyle.css" media="all" />
	<script type="text/javascript" src="third-party/glMatrix-0.9.5.min.js"></script>
	<script type="text/javascript" src="third-party/webgl-utils.js"></script>
	<script type="text/javascript" src="Soliton.js/Soliton.js"></script>
	<script type="text/javascript" src="CloudChamber.js/CloudChamber.js"></script>
	<script type="text/javascript" src="Lich.js"></script>
	<script type="text/javascript" src="LichParser.js"></script>
</head>

<body>

<script id="vertex_shader" type="x-shader/x-vertex">

#ifdef GL_ES
precision highp float;
#endif

uniform mat4 mvpMatrix;   // A constant representing the combined model/view/projection matrix.

attribute vec4 position;  // Per-vertex position information we will pass in.
attribute vec4 color;     // Per-vertex color information we will pass in.

varying vec4 vColor;       // This will be passed into the fragment shader.

void main()                 // The entry point for our vertex shader.
{
    vColor = color;      // Pass the color through to the fragment shader.
		  					// It will be interpolated across the triangle.

	// gl_Position is a special variable used to store the final position.
	// Multiply the vertex by the matrix to get the final point in normalized screen coordinates.
	gl_Position = mvpMatrix * position;
}

</script>

<script id="fragment_shader" type="x-shader/x-fragment">

#ifdef GL_ES
precision highp float;
#endif
							   // precision in the fragment shader.
varying vec4 vColor;          // This is the color from the vertex shader interpolated across the
		  					   // triangle per fragment.
void main()                    // The entry point for our fragment shader.
{
    gl_FragColor = vColor;    // Pass the color directly through the pipeline.
}

</script>


	<canvas id="canvas">

	</canvas>
	
	<textarea 
		id="terminal"
		contenteditable="true"
		rows="28" 
		spellcheck="false" 
		onkeydown="javascript:return keyDown(event);" 
		onkeyup="javascript:return keyUp(event);"
	>
// Lich.js

=> stream0 Stream [ 0.5 0.25 0.1 ] [ { garbage 0.5 } { garbage 0.125 } ]
=> stream1 Stream 1.0 { garbage 0.1 }
=> stream2 Stream 0.75 { garbage 0.1 }
=> stream3 Stream [ 0.125 0.25 0.5 0.75 1.0 ] { garbage 0.1 }
stop stream0
stop stream1
stop stream2
stop stream3
stop stream3
play stream3
stop stream3

=> stream4 Stream 0.5 { garbage 0.1 }
=> stream5 Stream 0.4 { garbage 0.1 }
stop stream4
stop stream5

// Streams can be passed to eachother!
=> stream6 Stream [ 0.5 1.0 0.25 ] [ 0.5 0.125 ]
=> stream7 Stream [ 0.25 0.5 ] { garbage stream6 }
stop stream6
stop stream7

	</textarea>
	
	<textarea id="post" rows="6" spellcheck="false" readonly="true">Lich.js&#10;</textarea>
	<textarea id="codeToCompile" rows="1" spellcheck="false" readonly="true" style="display:none;"
		onChange="javascript:return parseChangeFromNetwork();"> </textarea>

	<script LANGUAGE="JavaScript" type="text/javascript">
		compileLich();
	</script>

	<SCRIPT SRC="http://mobwrite3.appspot.com/static/compressed_form.js"></SCRIPT>`
	<SCRIPT>
	  mobwrite.syncGateway = 'http://mobwrite3.appspot.com/scripts/q.py';
	</SCRIPT>
	<BODY ONLOAD="
		mobwrite.share('terminal', 'codeToCompile'); 
		mobwrite.minSyncInterval = 25;
		mobwrite.maxSyncInterval = 1000;
		mobwrite.syncInterval = 500;
	">
	
</body>

</html>